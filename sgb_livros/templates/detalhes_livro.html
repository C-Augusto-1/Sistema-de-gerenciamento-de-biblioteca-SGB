<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ livro.titulo }} - Detalhes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="bg-light">

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container-fluid justify-content-center">
                <span class="navbar-brand mb-0 h1">SGB v0.1 - Sistema de Gerenciamento de Biblioteca</span>
                <a href="{% url 'logout' %}" class="link-light">Sair</a>
            </div>
        </nav>
    </header>

    <div class="container mt-5">
        <div class="card shadow-lg">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0"><i class="fas fa-book"></i> {{ livro.titulo }}</h2>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-8">
                        <h4 class="text-primary mb-3">Informações do Livro</h4>
                        
                        <div class="mb-3">
                            <p class="mb-2"><strong><i class="fas fa-user"></i> Autor:</strong> {{ livro.autor.nome }}</p>
                            <p class="mb-2"><strong><i class="fas fa-calendar"></i> Ano de Publicação:</strong> {{ livro.ano_publicacao }}</p>
                            <p class="mb-2"><strong><i class="fas fa-building"></i> Editora:</strong> {{ livro.editora|default:"Não informada" }}</p>
                        </div>

                        <hr>

                        <h5 class="text-primary mb-3">Descrição</h5>
                        <p class="text-justify">
                            {{ livro.descricao|default:"Sem descrição disponível para este livro." }}
                        </p>

                        <hr>

                        <h5 class="text-primary mb-3">Sobre o Autor</h5>
                        <div class="mb-3">
                            <p class="mb-2"><strong><i class="fas fa-flag"></i> Nacionalidade:</strong> {{ livro.autor.nacionalidade|default:"Não informada" }}</p>
                            {% if livro.autor.data_nascimento %}
                            <p class="mb-2"><strong><i class="fas fa-birthday-cake"></i> Data de Nascimento:</strong> {{ livro.autor.data_nascimento|date:"d/m/Y" }}</p>
                            {% endif %}
                        </div>
                        
                        {% if livro.autor.biografia %}
                        <p class="text-justify">
                            <strong>Biografia:</strong><br>
                            {{ livro.autor.biografia }}
                        </p>
                        {% endif %}

                        <hr>

                        <!-- Seção de Audiobook -->
                        <h5 class="text-primary mb-3"><i class="fas fa-headphones"></i> Audiobook</h5>
                        {% if livro.tem_audiobook %}
                            <div class="alert alert-success d-flex align-items-center" role="alert">
                                <i class="fas fa-check-circle fa-2x me-3"></i>
                                <div>
                                    <h6 class="mb-1">Audiobook disponível!</h6>
                                    <p class="mb-2">
                                        <strong>Plataforma:</strong> {{ livro.get_plataforma_audiobook_display }}
                                    </p>
                                    <a href="{{ livro.link_audiobook }}" target="_blank" class="btn btn-success btn-sm">
                                        <i class="fas fa-play"></i> Ouvir Audiobook
                                    </a>
                                </div>
                            </div>
                        {% else %}
                            <div class="alert alert-info d-flex align-items-center" role="alert">
                                <i class="fas fa-info-circle fa-2x me-3"></i>
                                <div>
                                    Audiobook não disponível para este título no momento.
                                </div>
                            </div>
                        {% endif %}

                    </div>

                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body text-center">
                                <i class="fas fa-book-open fa-5x text-primary mb-3"></i>
                                <h5 class="card-title">{{ livro.titulo }}</h5>
                                <p class="text-muted">{{ livro.autor.nome }}</p>
                                
                                <div class="d-grid gap-2 mt-4">
                                    <a href="{% url 'edita_livro' livro.id %}" class="btn btn-primary">
                                        <i class="fas fa-edit"></i> Editar
                                    </a>
                                    <a href="{% url 'cadastra_livro' %}" class="btn btn-secondary">
                                        <i class="fas fa-arrow-left"></i> Voltar
                                    </a>
                                </div>
                            </div>
                        </div>

                        {% if livro.tem_audiobook %}
                        <div class="card bg-success text-white mt-3">
                            <div class="card-body text-center">
                                <i class="fas fa-headphones fa-3x mb-2"></i>
                                <h6>Audiobook Disponível</h6>
                                <small>{{ livro.get_plataforma_audiobook_display }}</small>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

</html>